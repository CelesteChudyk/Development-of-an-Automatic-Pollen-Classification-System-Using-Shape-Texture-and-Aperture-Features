\textbf{Pollen grain detection} (including blur detection) (Hugo)

To accomplish the segmentation part for our system, we have to complete three tasks, one after another to give the best result as possible.
	To sum-up, we start from the basic microscope images and then filter them into a binary threshold image so that the “Blob Detection” algorithm can pick every particle in the image and save them. Once copied in the output folder, an additional step acts to clean unwanted particle (such as dirt) saved by the blob detector and unglue some images which contains more than one particle.

\textbf{THRESHOLD}

First, we start to import the microscope image to create the pre-filter of it. This pre-filter can be applied on Gray or Coloured image. Basically it consists in a negative, median blur and Gaussian blur filter. The negative part is here to make the background darker than the particles. The Median blur and Gaussian blur are here to clean-up the image so that the source image is transform in a much cleaner one with it's “big particles” more visible. This step helps to remove grain and dirt from the source image.
	
	Once the source image has been transform within the program (the source image on the hard-drive is not modified), we create a threshold from that using the OTSU algorithm to automatically detect the histogram peak. The returned image is an optimised binary image with its particles in white colour and the background in black colour.
	
	From this point, the binary image in not enough clear to algorithmically (the pollen particle are filled with black holes) so we have to apply the second filters which consist in two erode and two dilate filters with different applying iterations. The final threshold image is finally very clean. It has its particle in white all filled in white and the background completely filled in black colour. NB: some very low contrasted microscope images will sometimes lose some almost indistinguishable particles (even with human eyes) due to the lake of contrast with the background.
	
	The final threshold image is then turned into a negative one or not depending of its look after the final filter step (the particles have to be black and the background white).

\textbf{BLOB DETECTOR}

	Now that the “detector image” has been created, we can use it to get every particle (from the source image) as a new more little picture to save.
	
	To do so, we use an algorithm called “blob detection feature”. This program helps in capturing basic shapes from a source image. This algorithm is based on four attributes – Area, Circularity, Convexity and Inertia Ration – with their “minimum” and “maximum” values to let it be more accurate and quicker. Here we only really use the area attribute (on 300 for its minimum) to do not let the blob detector takes wrong little particles like dirt ones or to small ones which could not be processed.
	
	Once done, the blob detector gives back an array with blob objects, those objects contains informations like perimeter, position in the source image and area. We now know where is every particle in the image. By using those informations we can cut off squares from the source image into new pictures representing, for each one, a single particle.

\textbf{SAVING AND CLEANING}

ungluer (redo the job (OTSU will be modified))

blur cleaner → amount of clearness 20.
    
    
    